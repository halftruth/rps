<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
</head>
<body>
  <script>
    // Your JavaScript goes here!
    const moves = [`rock`, `paper`, `scissors`];
    const NUMBER_OF_ROUNDS = 5;

    function randomArrayPick(array){
        let randomChoice = array[Math.floor(Math.random()*array.length)];
        return randomChoice;
    }

    function randomPlay(){
        return randomArrayPick(moves);
    }

    function computerPlay(){
        return randomPlay();
    }

    function playRound(playerMove, computerMove){ 
        console.log(`PlayerMove: ${playerMove}`);
        let playerMoveFinal = playerMove == `random` ? randomPlay() : playerMove;
        console.log(`Player Selection: ${playerMoveFinal}`);
        console.log(`Computer Selection: ${computerMove}`);  
        // Pseudocode below
        // if both same, then tie
        // if player rock and computer paper, then computer win, else player wins
        // if player not rock and player is paper, and computer is scissors, then computer wins, else player wins
        // if not rock or paper, then player must be scissors. if computer rock, then computer wins, else player wins
        let gameOutcome = `computer`; 
        if (playerMoveFinal === null) {
            return "computer"; // if player cancels an entry, they forfeit that round
        } else if (playerMoveFinal === computerMove) {
            gameOutcome = `tie`;
        } else if (playerMoveFinal == `rock` && computerMove == `scissors`) {
            gameOutcome = `player`;
        } else if (playerMoveFinal == `paper` && computerMove == `rock`) {
            gameOutcome = `player`;
        } else if (playerMoveFinal == `scissors` && computerMove == `paper`){
            gameOutcome = `player`;
        }
        
        return gameOutcome;
    }

    // checks that it is a valid player move
    function validatePlayerMove(playerMove){
        if (typeof playerMove == `string`) {
            let downcasedPlayerMove = playerMove.toLowerCase();
            return ((downcasedPlayerMove == `rock`) || (downcasedPlayerMove == `paper`) || (downcasedPlayerMove == `scissors`) || (downcasedPlayerMove == `random`))
        }
        
        return false;
        }

    // prompts user for their move, checks that it is a valid move, and returns it with case-insenstive format
    function getPlayerMove() {
        let playerMove = window.prompt(`Make your move! (rock, paper, scissors, or random)`,`random`);
        if (playerMove === null) {
            return null;
        } else if (!(validatePlayerMove(playerMove))){
            alert(`Your move must be rock, paper, or scissors!`);
            getPlayerMove();    
        }
        return playerMove.toLowerCase();
    }

    function game(){
        // game code here
        let playerWins = 0;
        let computerWins = 0;
        for (let i = 0; i < NUMBER_OF_ROUNDS; i++) {
            switch(playRound(getPlayerMove(), computerPlay())) {
                case(`player`):
                    playerWins += 1;
                    break;
                case(`computer`):
                    computerWins += 1;
                    break;
                default:
                    break;
            }
        }
        if (playerWins == computerWins) {
            return `Wow, close one! You tied. ${playerWins} vs. ${computerWins}`
        } else {
            return (playerWins > computerWins) ? `You won! ${playerWins} vs. ${computerWins}` : `You lost... ${playerWins} vs. ${computerWins}`
        }
    }

  </script>
</body>
</html>